<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scaffolding Materials Manager</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    /* your CSS unchanged */
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Scaffolding Manager</h1>
      <p>Track materials & generate reports</p>
    </div>
    <div class="content">
      <div class="form-group">
        <label for="materialSelect">Select Material</label>
        <select id="materialSelect">
          <option value="">Choose material...</option>
        </select>
      </div>
      <div class="form-group">
        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" min="1" placeholder="Enter quantity">
      </div>
      <button class="btn btn-primary" onclick="addMaterial()">
        <span>Add Material</span>
      </button>
      <div class="materials-list" id="materialsList">
        <div class="empty-state">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
          <p>No materials added yet.<br>Start by selecting a material above.</p>
        </div>
      </div>
      <div class="total-section" id="totalSection" style="display: none;">
        <h3>Total Summary</h3>
        <p>Total Quantity: <span id="totalQty">0</span></p>
        <p>Total Weight: <span id="totalWeight">0</span> kg</p>
        <p>Total MT: <span id="totalMT">0.00</span></p>
      </div>
      <div class="transport-info" id="transportInfo" style="display: none;">
        <h3>Transport Details</h3>
        <input type="text" id="vehicleNo" placeholder="Vehicle Number" style="color: #333;">
        <input type="text" id="driverNo" placeholder="Driver Number" style="color: #333;">
        <input type="text" id="transportCarrier" placeholder="Transport/Carrier" style="color: #333;">
      </div>
      <button class="btn btn-secondary" onclick="generatePDF()" id="downloadBtn" style="display: none;">
        <span>Download PDF Report</span>
      </button>
    </div>
  </div>

  <script>
    // --- Materials list unchanged ---
const materials = [
  { name: "BOARD BEARER 1.3M", weight: 13 },
  { name: "BOARD BEARER 1.8M", weight: 17 },
  { name: "BOARD BEARER 2.5M", weight: 22.6 },
  { name: "CUPLOK LOOSE SPIGOT GALV", weight: 0.82 },
  { name: "SPIGOT PINS", weight: 0.13 },
  { name: "VERTICAL 0.4m NO SPIGOT-CUPLOK", weight: 2.08 },
  { name: "Cuplok Vertical 0.8m", weight: 4.4 },
  { name: "VERTICAL 0.8m NO SPIGOT-CUPLOK GALV", weight: 4.1 },
  { name: "VERTICAL 1.0m c/wSPIGOT-CUPLOK GALV", weight: 5.5 },
  { name: "VERTICAL 1.0m NO SPIGOT-CUPLOK GALV", weight: 5.2 },
  { name: "VERTICAL 1.3M C/W SPIGOT", weight: 7.4 },
  { name: "VERTICAL 1.3m NO SPIGOT-CUPLOK GALV", weight: 6.6 },
  { name: "Cuplok Vertical 1.5m", weight: 7.4 },
  { name: "VERTICAL 1.5m NO SPIGOT-CUPLOK GALV", weight: 7.4 },
  { name: "VERTICAL 1.8m NO SPIGOT-CUPLOK GALV", weight: 10.7 },
  { name: "VERTICAL 2.0m c/wSPIGOT-CUPLOK GALV", weight: 10.5 },
  { name: "VERTICAL 2.0m NO SPIGOT-CUPLOK GALV", weight: 10.0 },
  { name: "VERTICAL 2.3m NO SPIGOT-CUPLOK GALV", weight: 11.6 },
  { name: "Cuplok Vertical 2.5m", weight: 13.1 },
  { name: "Cuplok Vertical 2.5m O/E", weight: 13.4 },
  { name: "VERTICAL 3.0m c/wSPIGOT-CUPLOK GALV", weight: 16.2 },
  { name: "VERTICAL 3.0m NO SPIGOT-CUPLOK GALV", weight: 15.16 },
  { name: "HOOKED STEEL BOARD 0.6M GALV", weight: 5.04 },
  { name: "HOOKED STEEL BOARD 0.9M GALV", weight: 6.92 },
  { name: "HOOKED STEEL BOARD 1.3M GALV", weight: 9.32 },
  { name: "HOOKED STEEL BOARD 1.5M GALV", weight: 11.2 },
  { name: "HOOKED STEEL BOARD 1.8M GALV", weight: 12.61 },
  { name: "HOOKED STEEL BOARD 2.5M GALV", weight: 16.9 },
  { name: "HOOKED STEEL BOARD 3.0M GALV", weight: 22.1 },
  { name: "HORIZONTAL 0.6m - CUPLOK", weight: 2.47 },
  { name: "HORIZONTAL 0.73M GALV CUPLOK", weight: 3.07 },
  { name: "HORIZONTAL 0.9m-CUPLOK", weight: 3.57 },
  { name: "HORIZONTAL 1.0m-CUPLOK", weight: 3.88 },
  { name: "HORIZONTAL 1.2m-CUPLOK", weight: 4.8 },
  { name: "HORIZONTAL 1.25m-CUPLOK", weight: 5 },
  { name: "HORIZONTAL 1.3m-CUPLOK", weight: 5.17 },
  { name: "HORIZONTAL 1.5m-CUPLOK", weight: 5.91 },
  { name: "HORIZONTAL 1.6m-CUPLOK", weight: 6.17 },
  { name: "HORIZONTAL 1.8m-CUPLOK", weight: 6.77 },
  { name: "HORIZONTAL 2.5m-CUPLOK", weight: 9.4 },
  { name: "HORIZONTAL 3.0m-CUPLOK", weight: 11.12 },
  { name: "STEEL LADDER 3.0M", weight: 19.8 },
  { name: "STEEL LADDER 3.5M", weight: 24 },
  { name: "STEEL LADDERS 4.0M", weight: 26.94 },
  { name: "STEEL LADDER 4.5M", weight: 29.4 },
  { name: "STEEL LADDER 5.0M", weight: 34.05 },
  { name: "STEEL LADDER 5.5M", weight: 36.3 },
  { name: "STEEL LADDER 6.0M", weight: 37.18 },
  { name: "GALV TUBE 0.5M 3.25MM", weight: 1.875 },
  { name: "GALV TUBE 1.0M 3.25MM", weight: 3.75 },
  { name: "GALV TUBE 1.5M 3.25MM", weight: 5.625 },
  { name: "GALV TUBE 2.0M 3.25MM", weight: 7.5 },
  { name: "GALV TUBE 2.5M 3.25MM", weight: 9.375 },
  { name: "GALV TUBE 3.0M 3.25MM", weight: 11.25 },
  { name: "GALV TUBE 4.0M 3.25MM", weight: 15 },
  { name: "GALV TUBE 5.0M 3.25MM", weight: 18.75 },
  { name: "GALV TUBE 6.0M 3.25MM", weight: 22.5 },

  // ✅ New items added below
  { name: "STEEL TUBE 6.3M", weight: null },
  { name: "GALV TUBE 6.4M 3.25MM", weight: 24 },
  { name: "SPECIAL SCAFFOLD TUBE 2.8M BLACK", weight: 9.5 },
  { name: "LADDER BRACKET WITH COUPLER", weight: 2.99 },
  { name: "PS 1/2 WRAP OVER COUPLER", weight: 0.68 },
  { name: "SWIVEL COUPLER", weight: 1.15 },
  { name: "DOUBLE COUPLER", weight: 1.03 },
  { name: "SLEEVE COUPLER", weight: 1.15 },
  { name: "GRAVELOK COUPLER", weight: 1.53 },
  { name: "BOARD RETAINING CLAMP", weight: 0.57 },
  { name: "LADDER CLAMPS", weight: null },
  { name: "SPECIAL LADDER 5.4M", weight: 0 },
  { name: "LADDER BEAM 2.4M", weight: 25.89 },
  { name: "LADDER BEAM 3.0M", weight: 30.21 },
  { name: "LADDER BEAM 4.5M", weight: 48.96 },
  { name: "LADDER BEAM 4.8M", weight: 52.35 },
  { name: "LADDER BEAM 5.2M", weight: 56.92 },
  { name: "LADDER BEAM 6.0M", weight: 56.92 },
  { name: "TIMBER TOE BOARD LINEAR 1.3M", weight: 3 },
  { name: "TIMBER TOE BOARD LINEAR 2.0M", weight: 4 },
  { name: "TIMBER TOE BOARD LINEAR 2.7M", weight: 5 },
  { name: "BEAM BRACKET-CUPLOK", weight: 6.6 },
  { name: "STAIRCASE TREAD - 1000 MM", weight: 7.08 },
  { name: "STAIR CASE LEFT ASSEMBLY 2.5X2.0M", weight: 30.33 },
  { name: "STAIR RIGHT ASSY 2.5X2M", weight: 30.33 },
  { name: "CUPLOK STAIR STRINGER 2.5M L", weight: null },
  { name: "CUPLOK STAIR STRINGER 2.5M R", weight: null },
  { name: "STAIR CASE LEFT ASSY 2.5X1.5M", weight: 28.65 },
  { name: "STAIR CASE RIGHT ASSY 2.5X1.5M", weight: 28.65 },
  { name: "STAIR CASE LEFT ASSEMBLY 1.3X1.0M", weight: 17.03 },
  { name: "STAIR CASE RIGHT ASSEMBLY 1.3X1.0M", weight: 17.03 },
  { name: "SPIGOTS FOR ALU LADDER BEAM", weight: 1.53 },
  { name: "400 DEEP ALU LADDER BEAM 8.1M", weight: 36.3 },
  { name: "M12 X 60 MM NUT BOLT", weight: 0.15 },
  { name: "MODULAR STAIR TREAD 1.0M USA", weight: null },
  { name: "STAIRCASE TREAD - 1250 MM TYPE B", weight: 5 },
  { name: "Cuplok Stair Case 2.5X1.5M Handrail (Left)", weight: 19.7 },
  { name: "Cuplok Stair Case 2.5X1.5M Handrail (Right)", weight: 19.7 },
  { name: "HANDRAIL POST", weight: 5.7 },
  { name: "CUPLOK TRANSOM 0.275M", weight: null },
  { name: "OMEGA TRANSOM 0.5M-CUPLOK", weight: null },
  { name: "OMEGA TRANSOM 0.8M-CUPLOK", weight: null },
  { name: "CUPLOK OMEGA TRANSOM 1.0M", weight: null },
  { name: "Cuplok Transom 1.3m", weight: 6.9 },
  { name: "Cuplok Transom 1.3m HD", weight: null },
  { name: "Cuplok  Transom 1.5m", weight: 7.25 },
  { name: "Cuplok Transom 1.8m", weight: 9.3 },
  { name: "CUPLOK GANTRY TRANSOM 1.8M", weight: null },
  { name: "INT TRANSOM 1.3M", weight: null },
  { name: "Cuplok Transom 2.5m HD", weight: 24.8 },
  { name: "CUPLOK GANTRY TRANSOM 2.5M", weight: null },
  { name: "CUPLOK RETURN TRANSOM", weight: null },
  { name: "LEDGER BRACE 1.3X1.5M - CUPLOK", weight: null },
  { name: "LEDGER BRACE 1.3X2.0M-CUPLOK", weight: null },
  { name: "CUP BRACE 1064MM (1.0MX1.3M)", weight: null },
  { name: "CUPLOK BRACE 2059 SWIVEL ENDS 1.0m x 1.8m", weight: null },
  { name: "WEDGE BRACE 1.3X1.8M - CUPLOK", weight: null },
  { name: "BRACE ADAPTOR + H/CPLR-CUPLOK", weight: null },
  { name: "OMEGA 1BRD SUPPORT 0.29M", weight: null },
  { name: "OMEGA HOPUP 3BRD 0.795M-CUPLOK", weight: null },
  { name: "OMEGA HOPUP 2BRD 0.795M-CUPLOK", weight: null },
  { name: "Cuplok Corner Panel 2 Brd", weight: 6.6 },
  { name: "Cuplok Corner Panel 2x3 (L)", weight: 8.5 },
  { name: "Cuplok Corner Panel 2x3 (R)", weight: 8.5 },
  { name: "Cuplok Corner Panel 3 Brd", weight: 9.9 },
  { name: "TOEBOARD CLIP STEEL-CUPLOK", weight: null },
  { name: "U HEAD JACK", weight: null },
  { name: "STAIRCASE GUARDPOST-CUPLOK", weight: null },
  { name: "LOOSE SPIGOTS", weight: 0.8 },
  { name: "PRESSED JOINT PIN", weight: 0.85 },
  { name: "CUPLOK STD 0.8M SL", weight: 4 },
  { name: "CUPLOK STD  1.0M SL", weight: 5 },
  { name: "CUPLOK STD  1.3M SL", weight: 6.6 },
  { name: "CUPLOK STD  1.5M SL", weight: 7.9 },
  { name: "CUPLOK STD  1.8M SL", weight: 9.1 },
  { name: "CUPLOK STD  2.0M SP", weight: null },
  { name: "CUPLOK STD  2.0M SL", weight: 10.9 },
  { name: "CUPLOK STD  2.3M SL", weight: 11.6 },
  { name: "CUPLOK STD  2.5M SL", weight: 12.9 },
  { name: "CUPLOK STD  3.0M SP", weight: null },
  { name: "CUPLOK STD  3.0M SL", weight: 16.1 },
  { name: "CUPLOK LEDGER 0.6M", weight: 2.65 },
  { name: "CUPLOK LEDGER 0.8M", weight: 3.12 },
  { name: "CUPLOK LEDGER 0.9M", weight: 3.73 },
  { name: "CUPLOK LEDGER 1.0M", weight: 4.1 },
  { name: "CUPLOK LEDGER 1.3M", weight: 5.17 },
  { name: "CUPLOK LEDGER 1.5M", weight: null },
  { name: "CUPLOK LEDGER 1.6M", weight: null },
  { name: "CUPLOK LEDGER 1.8M", weight: 6.96 },
  { name: "CUPLOK LEDGER 2.5M", weight: 9.5 },
  { name: "CUPLOK BRIDGING LEDGER 5.0M", weight: null },
  { name: "STEEL BOARD 2.0M (GALV) 225X38X2MM W/O HOOK (BSEN12811-6)", weight: 12.4 },
  { name: "STEEL BOARD 2.5M (GALV) 225X38X2MM W/O HOOK (BSEN12811-6)", weight: 15.5 },
  { name: "CUPLOK STEEL BATTEN 0.5M GALV", weight: null },
  { name: "CUPLOK STEEL BATTEN 0.8M GALV", weight: null },
  { name: "CUPLOK STEEL BATTEN 1.5M", weight: null },
  { name: "SWIVEL FACE BRACE 1.8X2.0", weight: 9.8 },
  { name: "CASTOR WHEEL 8 SGB", weight: 7 },
  { name: "FORK HEAD 150 X 170MM", weight: null },
  { name: "FORK HEAD 200 X 186MM", weight: 4.5 },
  { name: "UNIVERSAL JACKS 860MM", weight: 3.9 },
  { name: "SOCKET BASES", weight: null },
  { name: "PALLET STEEL", weight: 35 },
  { name: "PALLET CAGE", weight: 40 },
  { name: "PALLET CAGE - 1.5M X 1.0M X 0.9M", weight: null },
  { name: "STAIR CASE UNIT 2.0X2.5X1.1 WIDE", weight: 90.28 },
  { name: "OMEGA BATTEN STRAP 0.8MX3MM PA", weight: null },
  { name: "OMEGA BATTEN STRAP 1.3MX3MM PA", weight: null },
  { name: "CUPLOK ALLOY STAIR 1.5M", weight: null },
  { name: "CUPLOK ALLOY STAIR HANDRAIL", weight: null },
  { name: "CUPLOK ALLOY TOP HANDRAIL", weight: null },
  { name: "STEP BRACKET 182MM RISE-CUPLOK", weight: null },
  { name: "CUPLOK 2.0M INTERMEDIATE VERT/ACCESS (100 BOUCHONS 24-27 KMANTO)", weight: null },
  { name: "CUPLOK LADDER ACCESS TRAPDOOR", weight: null },
  { name: "CUPLOK LADDER ACCESS TRANSOM 2.5M", weight: null },
  { name: "LA TRANSOM 1.8M PAINTED", weight: null },
  { name: "LADDER ACCESS TRANSOM-CUPLOK", weight: null },
  { name: "ID HEAD JACK  38/52", weight: 8.562 },
  { name: "ID BASE JACK 38/52", weight: 8.338 },
  { name: "8' 2\" X 9\" GRATING (2.5 mtr Deck)", weight: 0.12 },
  { name: "4' 11\" STEEL PLANK (1.5 Mtr Deck)", weight: 0.12 },
  { name: "8' 2\" X 9\" Horizontal TRUSS", weight: null },
  { name: "R-PIN 4 MM", weight: 0.02 },
  { name: "4' 1\" STEEL PLANK (1.25 Mtr Deck)", weight: 0.2 },
  { name: "TOPEC BEARING", weight: 2.4 },
  { name: "EDGE SUPPORT N", weight: 1.7 },
  { name: "JACK BRACE LONG-CUPLOK", weight: 9.2 },
  { name: "JACK BRACE SHORT-CUPLOK", weight: 7.7 },
  { name: "BRACING COUPLER - CUPLOK", weight: 0.8 },
  { name: "ADJ BRACE SHORT-CUPLOK", weight: 8.65 },
  { name: "ADJ BRACE LONG-CUPLOK", weight: 11.62 },
  { name: "CUPLOK ADJ COUPLER BRACE SHO", weight: 9 },
  { name: "CUPLOK ADJ COUPLER BRACE MED", weight: 10.6 },
  { name: "CUPLOK ADJ COUPLER BRACE LON", weight: 12.5 }
];

    let selectedMaterials = [];
    let serialCounter = 1;

    function initializeApp() {
      populateMaterialSelect();
    }

    function populateMaterialSelect() {
      const select = document.getElementById('materialSelect');
      materials.forEach((material, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = material.name;
        select.appendChild(option);
      });
    }

    function addMaterial() {
      const selectElement = document.getElementById('materialSelect');
      const quantityElement = document.getElementById('quantity');
      const materialIndex = selectElement.value;
      const quantity = parseInt(quantityElement.value);

      if (materialIndex === '' || !quantity || quantity <= 0) {
        alert('Please select a material and enter a valid quantity');
        return;
      }

      const material = materials[materialIndex];
      const totalWeight = (material.weight || 0) * quantity;

      const materialItem = {
        serial: serialCounter++,
        name: material.name,
        weight: material.weight || 0,
        quantity: quantity,
        totalWeight: totalWeight
      };

      selectedMaterials.push(materialItem);
      selectElement.value = '';
      quantityElement.value = '';
      updateMaterialsList();
      updateTotals();
    }

    function removeMaterial(index) {
      selectedMaterials.splice(index, 1);
      updateMaterialsList();
      updateTotals();
    }

    function updateMaterialsList() {
      const listElement = document.getElementById('materialsList');
      if (selectedMaterials.length === 0) {
        listElement.innerHTML = `
          <div class="empty-state">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <p>No materials added yet.<br>Start by selecting a material above.</p>
          </div>`;
        return;
      }

      listElement.innerHTML = selectedMaterials.map((item, index) => `
        <div class="material-item">
          <button class="remove-btn" onclick="removeMaterial(${index})">×</button>
          <div class="material-name">${item.name}</div>
          <div class="material-details">
            <span>SL: ${item.serial}</span>
            <span>Qty: ${item.quantity}</span>
            <span>Weight: ${item.weight} kg</span>
            <span>Total: ${item.totalWeight.toFixed(2)} kg</span>
          </div>
        </div>
      `).join('');
    }

    function updateTotals() {
      const totalQty = selectedMaterials.reduce((sum, item) => sum + item.quantity, 0);
      const totalWeight = selectedMaterials.reduce((sum, item) => sum + item.totalWeight, 0);
      const totalMT = totalWeight / 1000;
      document.getElementById('totalQty').textContent = totalQty;
      document.getElementById('totalWeight').textContent = totalWeight.toFixed(2);
      document.getElementById('totalMT').textContent = totalMT.toFixed(2);
      document.getElementById('totalSection').style.display = selectedMaterials.length ? 'block' : 'none';
      document.getElementById('transportInfo').style.display = selectedMaterials.length ? 'block' : 'none';
      document.getElementById('downloadBtn').style.display = selectedMaterials.length ? 'block' : 'none';
    }

    function generatePDF() {
      if (selectedMaterials.length === 0) {
        alert('No materials to export');
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Centered Header
      doc.setFontSize(16);
      doc.setFont(undefined, 'bold');
      doc.text('ANNEXURE', doc.internal.pageSize.getWidth() / 2, 20, { align: 'center' });

      // Table column positions
      const colX = [20, 40, 130, 150, 170, 200]; // column borders
      let y = 40;

      // Draw header row with borders
      doc.setFontSize(10);
      doc.rect(20, y, 180, 8); // header row box
      doc.text('SL NO.', 22, y + 6);
      doc.text('ITEM NAME', 60, y + 6);
      doc.text('WT', 132, y + 6);
      doc.text('QTY', 152, y + 6);
      doc.text('TOTAL WT', 172, y + 6);

      y += 8;

      // Table rows
      selectedMaterials.forEach((item) => {
        doc.rect(20, y, 180, 8); // row border
        doc.text(item.serial.toString(), 22, y + 6);
        const itemName = item.name.length > 35 ? item.name.substring(0, 35) + '...' : item.name;
        doc.text(itemName, 42, y + 6);
        doc.text(item.weight.toString(), 132, y + 6);
        doc.text(item.quantity.toString(), 152, y + 6);
        doc.text(item.totalWeight.toFixed(0), 172, y + 6);
        y += 8;
        if (y > 250) { doc.addPage(); y = 20; }
      });

      // Totals row
      doc.rect(20, y, 180, 8);
      const totalQty = selectedMaterials.reduce((sum, item) => sum + item.quantity, 0);
      const totalWeight = selectedMaterials.reduce((sum, item) => sum + item.totalWeight, 0);
      const totalMT = totalWeight / 1000;
      doc.text('TOTAL', 60, y + 6);
      doc.text(totalQty.toString(), 152, y + 6);
      doc.text(totalWeight.toFixed(0), 172, y + 6);
      y += 8;
      doc.rect(20, y, 180, 8);
      doc.text('TOTAL MT', 60, y + 6);
      doc.text(totalMT.toFixed(2), 172, y + 6);

      // Transport details
      y += 15;
      const vehicleNo = document.getElementById('vehicleNo').value || 'N/A';
      const driverNo = document.getElementById('driverNo').value || 'N/A';
      const transportCarrier = document.getElementById('transportCarrier').value || 'N/A';
      doc.text('VEHICLE NO.: ' + vehicleNo, 20, y);
      y += 8;
      doc.text('DRIVER NO.: ' + driverNo, 20, y);
      y += 8;
      doc.text('TRANSPORT/CARRIER: ' + transportCarrier, 20, y);

      const currentDate = new Date().toISOString().split('T')[0];
      doc.save(`Scaffolding_Materials_${currentDate}.pdf`);
    }

    initializeApp();
  </script>
</body>
</html>
